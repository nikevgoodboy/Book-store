<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Bookstore</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <style>
    /* Fade-in animation for the book cards */
    @keyframes fadeIn {
      0% {
        opacity: 0;
        transform: translateY(20px);
      }
      100% {
        opacity: 1;
        transform: translateY(0);
      }
    }

    /* Apply the fade-in animation with Tailwind class */
    .fade-in {
      animation: fadeIn 0.5s ease-out;
    }

    /* Hover animation for scaling and shadow */
    .card-hover:hover {
      transform: scale(1.05);
      box-shadow: 0 4px 20px rgba(0, 0, 0, 0.1);
      transition: transform 0.3s ease, box-shadow 0.3s ease;
    }
  </style>
</head>
<body class="bg-gray-100 font-sans">

  <!-- Navbar -->
  <header class="bg-blue-600 text-white py-4">
    <div class="container mx-auto text-center">
      <h1 class="text-3xl font-semibold">Bookstore</h1>
      <p>Search for Books by Author</p>
    </div>
  </header>

  <!-- Search Section -->
  <section class="container mx-auto p-6">
    <div class="flex justify-center mb-6">
      <input 
        type="text" 
        id="authorInput" 
        class="px-4 py-2 w-1/2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500" 
        placeholder="Enter author name"
      >
      <button 
        id="searchButton" 
        class="ml-4 px-6 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 focus:outline-none"
      >
        Search
      </button>
    </div>

    <!-- Book Results Section -->
    <div id="bookResults" class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-8">
      <!-- Books will be dynamically inserted here -->
    </div>
  </section>

  <script>
    // Function to fetch books by author or default books
    async function fetchBooks(query = '') {
      let url = query
        ? `https://www.googleapis.com/books/v1/volumes?q=inauthor:${query}&maxResults=40`
        : `https://www.googleapis.com/books/v1/volumes?q=subject:fiction&maxResults=40`;  // Default books if no query
      
      const response = await fetch(url);
      const data = await response.json();

      // Clear previous results
      const bookResults = document.getElementById('bookResults');
      bookResults.innerHTML = '';

      if (data.items) {
        data.items.forEach(book => {
          const bookItem = document.createElement('a');
          bookItem.href = book.volumeInfo.infoLink; // Link to the book details
          bookItem.target = "_blank"; // Open in new tab
          bookItem.classList.add('bg-white', 'p-4', 'rounded-lg', 'shadow-md', 'card-hover', 'fade-in', 'block');

          // Book title and author
          const title = book.volumeInfo.title || 'No title available';
          const authors = book.volumeInfo.authors ? book.volumeInfo.authors.join(', ') : 'Unknown Author';

          // Book image
          const image = book.volumeInfo.imageLinks ? book.volumeInfo.imageLinks.thumbnail : 'https://via.placeholder.com/128x200?text=No+Image';

          bookItem.innerHTML = `
            <img src="${image}" alt="${title}" class="w-full h-48 object-cover rounded-lg mb-4">
            <h3 class="text-xl font-semibold mb-2">${title}</h3>
            <p class="text-gray-700">${authors}</p>
          `;

          // Append book item to results section
          bookResults.appendChild(bookItem);
        });
      } else {
        bookResults.innerHTML = `<p class="col-span-3 text-center text-xl text-gray-600">No books found.</p>`;
      }
    }

    // Event listener for the search button
    document.getElementById('searchButton').addEventListener('click', () => {
      const author = document.getElementById('authorInput').value;
      if (author) {
        fetchBooks(author);  // Fetch books by the entered author
      } else {
        alert('Please enter an author name.');
      }
    });
    
    // Allow enter key to trigger search
    document.getElementById('authorInput').addEventListener('keypress', (e) => {
      if (e.key === 'Enter') {
        const author = document.getElementById('authorInput').value;
        if (author) {
          fetchBooks(author);
        } else {
          alert('Please enter an author name.');
        }
      }
    });

    // Fetch default books when the page loads
    window.onload = fetchBooks;
  </script>

</body>
</html>
